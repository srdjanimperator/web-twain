<!DOCTYPE html>
<html>
  <head> </head>
  <body>
      <input type="text" id="txt">
      <button onclick="doSend(document.getElementById('txt').value)" type="button">Test</button>
      <img id="scannedImage" />
    <script>
      var wsUri = "ws://127.0.0.1:8083";
      var ws = new WebSocket(wsUri);

      console.log(ws);
      ws.onopen = function (e) {
        console.log("CONNECTED");
        doSend("TEST MSG")
      };
      ws.onclose = function (e) {
        console.log("DISCONNECTED");
      };

      ws.onmessage = function (e) {
        console.log("RESPONSE: " + e.data);
        if (e.data instanceof Blob) {
          var objectURL = URL.createObjectURL(e.data);
          console.log("Image received")
          document.getElementById("scannedImage").src = objectURL;
        }
      };

      ws.onerror = function (e) {
        console.log("ERROR: " + e.data);
      };

      function doSend(message) {
        console.log("SENT: " + message);
        ws.send(message);
      }
    </script>
  </body>
</html>
